2022-08-21 
1.调试了基本功能，按键正常，sht30温度读取正常，laser的控制正常（pwm需要注意），led指示灯基本正常。
2.充电时不能开机，开机后充电则将关机
3.ADC好像有点不稳，待验证
4.红外检测待修改，直接的高低电平受到红外激光的影响，有干扰，待设置更优方法。
5.蓝牙暂未调试。spi接口暂未调试，语音播放接口未调试。


2022-08-23
1.主要是红外发射接收部分的功能增加，发送部分38K的载波已经做好，并且使用示波器查看了（使用的是timer2，PC8使用了全映射完成）。
2.红外接收部分还没调试，需要红外接收器联调，使用引脚（双边沿）外部中断，使用定时器（目前暂定timer4）来记录高低电平的时间，来分辨接收的数据是0还是1
   目前接收通信是接收32位（不包括引导码），包括地址码，取反地址码，数据码，和取反数据码4个字节。低位在前的方式接收。
   但是发送端暂时不是数据与取反数据，而是任意的4个字节。后面根据情况调整。发送也要同步低位在前的方式。
   主要根据的协议也是网上的NEC的数据通信协议。
3. adc电池电压设置部分进行了调整，之前通道设置的有些错误，具体要参考gd32的手册，而不是自己猜测的哪个ADC和哪个通道。需要调试一下
4.更新红外检测任务。待测试


2022-08-24
1.在gd32（其他型号）上面调试过的ir程序，已经验证能正常接收和发送和识别
因为红外接收器在接收到38k载波时是低电平，而没有载波时是高电平。
但是本程序只能将占空比调到100%发出高电平，以模拟该（载波）电平信号。与实际红外接收器的电平是反的，但是程序中只计算电平持续的时间，这样就无所谓高低电平不对应的问题。
已经正常验证接收，包括发送都是使用示波器看过波形的。
2.没有在真实的机器上跑过，所以备份了一个ir_backup.rar部分，内部有说明文件，出现问题时备查。
3.因为测试的目标机器没有timer4，重新修改接收定时器为timer3.



2022-09-08
1.红外发送和接收调试已经正常，但是跟角度有关。必须正对着才行。
2.程序中有一部分是做了调试模式，比如充电时开机，还有打印信息等。
3.电池电压数据采集已经正常了。（这次程序没有修改），调试信息已经关闭。可能采集时漂移比较大。
4.laser的pwm已经关闭，暂时只是全部点亮的方式处理。
5.因为调试需要，这次调试器改为了jlink。


2022-09-10
1.增加调试串口的命令，编写了命令的说明手册。（详细参考说明手册）
2.修改laser的pwm的方式（使用pwm1.c），改为了TIME1来处理，1ms定时，20ms的周期，50HZ的频率，占空比包含20级，每5分为一级。

2022-11-06
1.增加flash记录启动次数，大于3000次不允许启动
2.iic改为lib的方式，不对外提供源码了。
3.调整了一下ir接收数据错误时的处理。
4.调整了ir接收到数据就关闭红外的功能，收到红外则表示摘下头盔。



2023-02-19
1.误开机后的单片机一直运行，没有关机，导致耗电，根据状态，执行关机命令

